library(tidyverse)
install.packages("tidyverse")
library(tidyverse)
library(lubridate)
library(tidyverse)
library(lubridate)
retail <- read.csv("online_retail.csv")
#cleaning the dataset
retail <- retail %>% drop_na(CustomerID, Description)
retail <- retail %>% filter(Quantity > 0)
retail$InvoiceDate <- dmy_hms(retail$InvoiceDate)
head(retail$InvoiceDate)
head(as.character(retail$InvoiceDate))
colnames(retail)
str(retail$InvoiceDate)
retail <- read.csv("online_retail.csv", stringsAsFactors = FALSE)
str(retail$InvoiceDate)
head(retail$InvoiceDate)
library(lubridate)
retail$InvoiceDate <- mdy_hm(retail$InvoiceDate)
retail <- read.csv("online_retail.csv", stringsAsFactors = FALSE)
head(retail$InvoiceDate, 20)
library(lubridate)
retail$InvoiceDate <- parse_date_time(retail$InvoiceDate,
orders = c("mdy HM", "mdy HMS",
"dmy HM", "dmy HMS",
"ymd HM", "ymd HMS"),
exact = FALSE)
sum(is.na(retail$InvoiceDate))
head(retail$InvoiceDate)
head(retail$InvoiceDate, 20)
retail <- retail %>% filter(Quantity > 0)
# removing extra spaces from description column
retail$Description <- str_trim(retail$Description)
# Adding total sales column
retail <- retail %>% mutate(Total_Sales = Quantity * UnitPrice)
# adding columns for month and year
retail <- retail %>% mutate(Month = month(InvoiceDate,label=TRUE),
Year = year(InvoiceDate))
head(retail)
#Exploratory Data Analysis
## Total sales
sum(retail$Total_Sales)
top_products <- retail %>%
group_by(Description) %>%
summarise(Total_Sales = sum(Total_Sales)) %>%
arrange(desc(Total_Sales)) %>%
head(10)
top_products <- retail %>%
group_by(Description) %>%
summarise(Total_Sales = sum(Total_Sales)) %>%
arrange(desc(Total_Sales)) %>%
head(10)
top_products
sales_by_country <- retail %>%
group_by(Country)
summarise(Total_Sales = sum(Total_Sales)) %>%
arrange(desc(Total_Sales))
top_products <- retail %>%
group_by(Description) %>%
summarise(Total_Sales = sum(Total_Sales)) %>%
arrange(desc(Total_Sales)) %>%
head(10)
top_products
sales_by_country <- retail %>%
group_by(Country)
summarise(Total_Sales = sum(Total_Sales))%>%
arrange(desc(Total_Sales))
retail <- retail %>%
mutate(Total_Sales = Quantity * UnitPrice)
colnames(retail)
sales_by_country <- retail %>%
group_by(Country)
summarise(Total_Sales = sum(Total_Sales))%>%
arrange(desc(Total_Sales))
## sales by country
sales_by_country <- retail %>%
sales_by_country <- retail %>%
group_by(Country) %>%
summarise(Total_Sales = sum(Total_Sales)) %>%
arrange(desc(Total_Sales))
sales_by_country <- retail %>%
group_by(Country) %>%
summarise(Total_Sales = sum(Total_Sales, na.rm = TRUE)) %>%
arrange(desc(Total_Sales))
head(sales_by_country)
sales_by_date <- retail %>%
group_by(InvoiceDate) %>%
summarise(Daily_Sales = sum(Total_Sales))
ggplot(sales_by_date, aes(x = InvoiceDate, y=Daily_Sales)) +
geom_line(col = "blue") +
labs(title = "Daily Sales Over Time", x="Date", y="Sales")
## customer segmentation
library(arules)
install.packages("arules")
## customer segmentation
library(arules)
transactions <- as(split(retail$StockCode, retail$InvoiceNo),
"transactions")
rules <- apriori(transactions, parameter = list(supp = 0.01,
conf = 0.5))
inspect(head(sort(rules, by="lift"), 10))
## monthly/yearly sales trends
monthly_sales <- retail %>%
monthly_sales <- retail %>%
group_by(Year, Month) %>%
summarise(monthly_sales = sum(Total_Sales))
monthly_sales <- retail %>%
group_by(Year, Month) %>%
summarise(monthly_sales = sum(Total_Sales, na.rm = TRUE))
ggplot(monthly_sales, aes(x=Month, y=monthly_sales, group = Year,
col=factor(Year))) +
geom_line() +
labs(title = "Monthly Sales Trend", x="Month", y="Sales")
head(retail$InvoiceDate)
top_products
head(sales_by_country)
